{"version":3,"sources":["webpack:///./src/app/objects/consts.ts","webpack:///./src/app/grid-cell/grid-cell.component.ts","webpack:///./src/app/objects/Game.ts","webpack:///./src/app/objects/Ship.ts","webpack:///./src/app/service/shot.service.ts","webpack:///./src/app/game/game.component.ts","webpack:///./src/app/grid-ship/grid-ship.component.ts","webpack:///./src/app/objects/Player.ts","webpack:///./src/app/service/game.resolver.ts","webpack:///./src/app/service/player.resolver.ts","webpack:///./src/app/start/start.component.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/game-controls/game-controls.component.ts","webpack:///./src/app/game-grid/game-grid.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/game-controls/game-controls.component.css","webpack:///./src/app/game-grid/game-grid.component.css","webpack:///./src/app/game/game.component.css","webpack:///./src/app/grid-cell/grid-cell.component.css","webpack:///./src/app/grid-ship/grid-ship.component.css","webpack:///./src/app/start/start.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/game-controls/game-controls.component.html","webpack:///./src/app/game-grid/game-grid.component.html","webpack:///./src/app/game/game.component.html","webpack:///./src/app/grid-cell/grid-cell.component.html","webpack:///./src/app/grid-ship/grid-ship.component.html","webpack:///./src/app/start/start.component.html","webpack:///./src/app/service/game.service.ts","webpack:///./src/app/service/player.service.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["export const ROUTE_PART_SETUP : string = \"setup\";\nexport const ROUTE_PART_PLAY : string = \"play\";\nexport const MAX_PLAYERS : number = 6;\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/objects/consts.ts","import {Component, OnInit, HostListener, Output, EventEmitter, Input} from '@angular/core';\nimport {Game} from \"../objects/Game\";\nimport {Ship} from \"../objects/Ship\";\nimport {ActivatedRoute, UrlSegment} from \"@angular/router\";\nimport {ROUTE_PART_SETUP} from \"../objects/consts\";\n\nconst colors : string[] = [\n    'blue',\n    'orange',\n    'red',\n    'green',\n    'purple',\n    'darkblue'\n];\n\n@Component({\n  selector: 'grid-cell',\n  templateUrl: './grid-cell.component.html',\n  styleUrls: ['./grid-cell.component.css']\n})\nexport class GridCellComponent implements OnInit {\n\n    public isSelected : boolean = false;\n    public hits : string[] = [];\n    public shotPending : boolean = false;\n    public miss : boolean = false;\n\n    @Input()\n    public x : number;\n    @Input()\n    public y : number;\n\n    @Output()\n    public selected : EventEmitter<GridCellComponent> = new EventEmitter<GridCellComponent>();\n\n    constructor(\n        private route : ActivatedRoute\n    ) { }\n\n    public ngOnInit() {\n    }\n\n    public select() {\n        // TODO: 3 isn't a good way to check for playing\n        if (this.route.snapshot.url.length != 3) {\n            this.isSelected = true;\n            this.selected.emit(this);\n        }\n    }\n\n    public setSelection(event : any) {\n        if (event != this) {\n            this.isSelected = false;\n        }\n    }\n\n    public hitCell(ships : Ship[]) : void {\n        this.shotPending = false;\n        this.miss = !ships.length;\n\n        this.hits = ships.map((ship) => {\n            return colors[ship['playerIndex']];\n        });\n    }\n\n    public shoot() : void {\n        this.shotPending = true;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/grid-cell/grid-cell.component.ts","import {Player} from \"./Player\";\nimport BasicProfile = gapi.auth2.BasicProfile;\n\nexport enum GameStatus {\n    SETUP,\n    PLAYING\n}\n\nexport class Game {\n    public players : Player[] = [];\n    public status : number = GameStatus.SETUP;\n\n    constructor(\n        public gameID : string,\n        public ownerID : string\n    ) {}\n\n    public initFromData(data : any) {\n        this.status = data.status;\n        this.players = data.players.map(this.makePlayerFromData);\n    }\n\n    public createPlayer(player : BasicProfile) {\n        this.players.push(new Player(player.getId(), player.getName()));\n    }\n\n    public addPlayerFromData(playerData : any) {\n        this.players.push(this.makePlayerFromData(playerData));\n    }\n\n    public makePlayerFromData(playerData : any) : Player {\n        return new Player(playerData.id, playerData.name, playerData.ships, playerData.locked);\n    }\n\n    public getPlayer(id : string) {\n        for (let player of this.players) {\n            if (player.id == id) {\n                return player;\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/objects/Game.ts","import {ICord} from \"./interfaces\";\n\nexport const ShipTypes = {\n    Carrier : \"Carrier\",\n    Battleship : \"Battleship\",\n    Cruiser : \"Cruiser\",\n    Destroyer : \"Destroyer\",\n    Submarine : \"Submarine\",\n};\n\n// type ShipType = \"Carrier\" | \"Battleship\" | \"Cruiser\" | \"Destroyer\" | \"Submarine\";\n\nexport class Ship {\n    public size : number;\n    public angle : number = 0;\n    public position : ICord;\n    public hits : boolean[];\n    public hasNewRotation : boolean = false;\n    public status : string = \"\";\n\n    constructor(\n        public readonly playerId : string,\n        public readonly type : string\n    ) {\n        this.initShip();\n    }\n\n    private initShip() {\n        switch (this.type) {\n            case ShipTypes.Carrier:\n                this.size = 5;\n                this.position = {\n                    x: 0,\n                    y: 0\n                };\n                break;\n            case ShipTypes.Battleship:\n                this.size = 4;\n                this.position = {\n                    x: 0,\n                    y: 1\n                };\n                break;\n            case ShipTypes.Cruiser:\n                this.size = 3;\n                this.position = {\n                    x: 0,\n                    y: 2\n                };\n                break;\n            case ShipTypes.Destroyer:\n                this.size = 3;\n                this.position = {\n                    x: 0,\n                    y: 3\n                };\n                break;\n            case ShipTypes.Submarine:\n                this.size = 2;\n                this.position = {\n                    x: 0,\n                    y: 4\n                };\n                break;\n        }\n\n        this.hits = new Array(this.size);\n    }\n\n    get shipHeight() : number {\n        return this.angle == 0 ? 1 : this.size;\n    }\n\n    get shipWidth() : number {\n        return this.angle == 90 ? 1 : this.size;\n    }\n\n    public rotate() : void {\n        this.angle = (this.angle + 45) % 180;\n        this.hasNewRotation = true;\n    }\n\n    public getCells() : ICord[] {\n        let cords : ICord[] = [];\n\n        let xOffset : number = 0,\n            yOffset : number = 0;\n\n        switch (this.angle) {\n            case 0:\n                xOffset = 1;\n                break;\n            case 45:\n                xOffset = 1;\n                yOffset = 1;\n                break;\n            case 90:\n                yOffset = 1;\n                break;\n            case 135:\n                yOffset = 1;\n                xOffset = -1;\n        }\n\n        for (let i = 0; i < this.size; i++) {\n            cords.push({\n                x: this.position.x + xOffset * i,\n                y: this.position.y + yOffset * i\n            });\n        }\n\n        return cords;\n    }\n\n    public hitShip(hitCord : ICord) : boolean {\n        return this.getCells().some((cord, index) => {\n            if (cord.x == hitCord.x && cord.y == hitCord.y) {\n                this.hits[index] = true;\n                return true;\n            }\n        })\n    }\n\n    public isActive() : boolean {\n        let hits : number = 0;\n        this.hits.forEach((hit) => {\n            hits += +hit;\n        });\n        return hits < this.size;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/objects/Ship.ts","import {Injectable} from \"@angular/core\";\nimport {Game, GameStatus} from \"../objects/Game\";\nimport BasicProfile = gapi.auth2.BasicProfile;\nimport {AngularFire, FirebaseListObservable} from \"angularfire2\";\nimport {Player} from \"../objects/Player\";\nimport {Observable} from \"rxjs\";\nimport {PlayerService} from \"./player.service\";\nimport {GameService} from \"./game.service\";\nimport {ICord, IShot} from \"../objects/interfaces\";\n\nconst SHOT_ENDPOINT : string = 'shot';\n\n@Injectable()\nexport class ShotService {\n    private previousShots : {} = {};\n    private fbShots : FirebaseListObservable<IShot[]>;\n    private profile : BasicProfile;\n\n    constructor(\n        private firebase : AngularFire,\n        private playerService : PlayerService,\n        private gameService : GameService\n    ) {}\n\n    public getShots(gameID : string) : Observable<IShot[]> {\n        return new Observable((observer) => {\n            this.initShots(gameID);\n            this.fbShots.subscribe((shotData) => {\n                observer.next(shotData);\n                // observer.next(shotData.filter((shot) => {\n                //     let newShot : boolean = !this.previousShots[shot['$key']];\n                //     this.previousShots[shot['$key']] = true;\n                //     return newShot;\n                // }));\n            });\n        });\n    }\n\n    private initShots(gameID : string) {\n        if (!this.fbShots) {\n            this.fbShots = this.firebase.database.list(`${SHOT_ENDPOINT}/${gameID}`);\n        }\n    }\n\n    // TODO: Do we always have a fbShots list by now?\n    public fire(shots : IShot[]) : void {\n        shots.forEach((shot) => this.fbShots.push(shot));\n    }\n\n    public playerTurn(gameID : string) : Observable<string> {\n        this.initShots(gameID);\n        return this.fbShots\n            // using a delay because we need the ships to get the hits registered first\n            .delay(10)\n            .map((shot) => {\n                return shot.length == 0 ? \"\" : shot[shot.length - 1].playerID;\n            });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/service/shot.service.ts","import { Component, OnInit } from '@angular/core';\nimport {Game, GameStatus} from \"../objects/Game\";\nimport {GameService} from \"../service/game.service\";\nimport {PlayerService} from \"../service/player.service\";\nimport {ActivatedRoute, UrlSegment, Router} from \"@angular/router\";\nimport {ROUTE_PART_SETUP, ROUTE_PART_PLAY} from \"../objects/consts\";\nimport BasicProfile = gapi.auth2.BasicProfile;\nimport {Player} from \"../objects/Player\";\n\n@Component({\n  selector: 'app-game',\n  templateUrl: './game.component.html',\n  styleUrls: ['./game.component.css']\n})\nexport class GameComponent implements OnInit {\n    public game : Game;\n    public player : Player;\n    public positioning : boolean = true;\n\n    constructor(\n        private route : ActivatedRoute,\n        private router : Router,\n        private gameService : GameService,\n    ) {}\n\n    ngOnInit() {\n        // TODO: Figure out how to get observable off of route data\n        this.gameService.getGameObservable().subscribe(this.handleGame.bind(this));\n\n        this.route.data\n            .subscribe(({ profile, game } : { profile : BasicProfile, game : Game }) => {\n                this.player = game.getPlayer(profile.getId());\n                // this.game = game;\n                // this.positioning = game.status == GameStatus.SETUP;\n            });\n\n        // validate URL\n        this.route.url\n            .subscribe((parts : UrlSegment[]) => {\n                if (this.game) {\n                    this.validateRoute();\n                }\n            });\n    }\n\n    private validateRoute() {\n        let parts : UrlSegment[] = this.route.snapshot.url;\n        if (parts[parts.length - 1].path == ROUTE_PART_SETUP && this.game.status != GameStatus.SETUP) {\n            this.router.navigate(['../'], { relativeTo: this.route });\n        } else if (parts[parts.length - 1].path != ROUTE_PART_SETUP && this.game.status == GameStatus.SETUP) {\n            this.router.navigate(['./setup'], { relativeTo: this.route });\n        }\n    }\n\n    private handleGame(game : Game) {\n        this.gameService.getGameObservable().subscribe((game) => {\n            this.game = game;\n            this.positioning = game.status == GameStatus.SETUP;\n            this.validateRoute();\n        });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/game.component.ts","import {Component, OnInit, Input, ElementRef, EventEmitter, Renderer, Output} from '@angular/core';\nimport {Ship} from \"../objects/Ship\";\nimport {element} from \"protractor\";\nimport {ICord} from \"../objects/interfaces\";\nimport {ActivatedRoute, UrlSegment} from \"@angular/router\";\nimport {ROUTE_PART_SETUP} from \"../objects/consts\";\n\nconst BOX_SIZE : number = 40;\n// TODO: get this from somewhere else\nconst GRID_SIZE : number = 12;\n\n@Component({\n    selector: 'grid-ship',\n    templateUrl: './grid-ship.component.html',\n    styleUrls: ['./grid-ship.component.css']\n})\nexport class GridShipComponent implements OnInit {\n\n    @Input() public ship : Ship;\n    public isSelected : boolean = false;\n    public shipClasses : {} = {};\n    private listeners : Function[] = [];\n    private isDragging : boolean = false;\n    private mouseDownEvent : MouseEvent;\n    private startDragPos : ICord;\n    public doingSetup : boolean = false;\n\n    @Output()\n    public selected : EventEmitter<GridShipComponent> = new EventEmitter<GridShipComponent>();\n\n    constructor(\n        private elementRef: ElementRef,\n        private renderer: Renderer,\n        private route : ActivatedRoute\n    ) { }\n\n    ngOnInit() {\n        this.initRouteCheck();\n        this.setShipClasses();\n    }\n\n    // Future: maybe make the ship send an event that it changed.\n    ngDoCheck() {\n        if (this.doingSetup && this.ship.hasNewRotation) {\n            this.fixPosition();\n            this.setShipClasses();\n            this.ship.hasNewRotation = false;\n        }\n    }\n\n    private initRouteCheck() {\n        this.route.url\n            .subscribe((parts : UrlSegment[]) => {\n                this.doingSetup = parts[parts.length - 1].path == ROUTE_PART_SETUP;\n\n                if (this.doingSetup) {\n                    this.setEventBindings();\n                } else {\n                    this.removeEventBindings();\n                }\n            });\n    }\n\n    private setShipClasses() {\n        this.shipClasses = {};\n        this.shipClasses[this.ship.type] = true;\n        this.shipClasses[`x-${this.ship.position.x}`] = true;\n        this.shipClasses[`y-${this.ship.position.y}`] = true;\n        this.shipClasses[`dir-${this.ship.angle}`] = true;\n        this.shipClasses['selected'] = this.isSelected;\n    }\n\n    private setEventBindings() {\n        if (/Mobile/.test(navigator.userAgent)) {\n            this.listeners.push(this.renderer.listenGlobal('document', 'touchstart', this.mouseDownHandler.bind(this)));\n            this.listeners.push(this.renderer.listenGlobal('body', 'touchmove', this.mouseMoveHandler.bind(this)));\n            this.listeners.push(this.renderer.listenGlobal('document', 'touchend', this.mouseUpHandler.bind(this)));\n        } else {\n            this.listeners.push(this.renderer.listenGlobal('document', 'mousedown', this.mouseDownHandler.bind(this)));\n            this.listeners.push(this.renderer.listenGlobal('body', 'mousemove', this.mouseMoveHandler.bind(this)));\n            this.listeners.push(this.renderer.listenGlobal('document', 'mouseup', this.mouseUpHandler.bind(this)));\n        }\n    }\n\n    private removeEventBindings() {\n        this.listeners.forEach((listener) => listener());\n        this.listeners = [];\n    }\n\n    private mouseDownHandler(event : MouseEvent) {\n        this.isSelected = this.elementRef.nativeElement == (<Node>event.target).parentNode;\n        this.shipClasses['selected'] = this.isSelected;\n\n        if (this.isSelected) {\n            this.isDragging = true;\n            this.mouseDownEvent = event;\n            this.startDragPos = {\n                x: this.ship.position.x,\n                y: this.ship.position.y\n            };\n        }\n    }\n\n    private mouseMoveHandler(event : MouseEvent) {\n        if (this.isDragging) {\n            let y : number = Math.round((event.pageY - this.mouseDownEvent.pageY) / BOX_SIZE),\n                x : number = Math.round((event.pageX - this.mouseDownEvent.pageX) / BOX_SIZE);\n\n            if (x != this.ship.position.x || y != this.ship.position.y) {\n                this.ship.position.y = this.startDragPos.y + y;\n                this.ship.position.x = this.startDragPos.x + x;\n                this.fixPosition();\n\n                this.setShipClasses();\n            }\n\n            event.preventDefault();\n        }\n    }\n\n    private mouseUpHandler(event : MouseEvent) {\n        this.isDragging = false;\n    }\n\n    public ngOnDestroy() {\n        this.removeEventBindings();\n    }\n\n    private fixPosition() {\n        let xOffset : number = this.ship.angle  == 135 ?\n            this.ship.shipWidth - 1 :\n            0;\n        this.ship.position.y = Math.max(0, Math.min(GRID_SIZE - this.ship.shipHeight, this.ship.position.y));\n        this.ship.position.x = Math.max(xOffset, Math.min(GRID_SIZE - this.ship.shipWidth + xOffset, this.ship.position.x));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/grid-ship/grid-ship.component.ts","import {Ship, ShipTypes} from \"./Ship\";\nimport {Injectable} from \"@angular/core\";\nimport {ICord} from \"./interfaces\";\nimport BasicProfile = gapi.auth2.BasicProfile;\n\nexport class Player {\n    public ships : Ship[] = [];\n    public locked : boolean = false;\n\n    constructor(\n        public id : string,\n        public name : string,\n        ships ?: Ship[],\n        locked ?: boolean\n    ) {\n        this.initShips(ships);\n        this.locked = this.locked || !!locked;\n    }\n\n    private initShips(ships ?: Ship[]) {\n        if (ships) {\n            this.ships = ships;\n            this.ships.forEach((shipData, pos) => {\n                this.ships[pos] = Object.assign(new Ship(this.id, shipData.type), shipData);\n            });\n        } else {\n            this.ships.push(new Ship(this.id, ShipTypes.Carrier));\n            this.ships.push(new Ship(this.id, ShipTypes.Battleship));\n            this.ships.push(new Ship(this.id, ShipTypes.Cruiser));\n            this.ships.push(new Ship(this.id, ShipTypes.Destroyer));\n            this.ships.push(new Ship(this.id, ShipTypes.Submarine));\n        }\n    }\n\n    public validShipPositions() : boolean {\n        let validPos : boolean = true,\n            positions : any = {};\n\n        this.ships.some((ship) => {\n            if (!validPos) {\n                return true;\n            }\n\n            ship.getCells().forEach((pos) => {\n                if (typeof positions[pos.y] == \"undefined\") {\n                    positions[pos.y] = {};\n                }\n                if (positions[pos.y][pos.x]) {\n                    validPos = false;\n                } else {\n                    positions[pos.y][pos.x] = true;\n                }\n            });\n        });\n\n        return validPos;\n    }\n\n    public lockShips() : void {\n        this.locked = true;\n    }\n\n    public hitShips(cord : ICord) : any[] {\n        let hits : any[] = [];\n\n        this.ships.some((ship) => {\n            if (ship.hitShip(cord)) {\n                hits.push(ship);\n                return true;\n            }\n        });\n\n        return hits;\n    }\n\n    public shipsRemaining() : number {\n        let sum : number = 0;\n\n        this.ships.forEach((ship) => {\n            sum += +ship.isActive();\n        });\n\n        return sum;\n    }\n\n   /*  {\n   \"players\": [{\n        \"name\": \"asdf\",\n        \"ships\": [{\n            \"name\": \"Carrier\",\n            \"status\": \"\",\n            \"size\": 5,\n            \"direction\": 0,\n            \"position\": [{\n                \"y\": 0,\n                \"x\": 0\n            }],\n            \"hit\": [0, 0, 0, 0, 0]\n        }, {\n            \"name\": \"Battleship\",\n            \"status\": \"\",\n            \"size\": 4,\n            \"direction\": 0,\n            \"position\": [{\n                \"y\": 1,\n                \"x\": 0\n            }],\n            \"hit\": [0, 0, 0, 0]\n        }, {\n            \"name\": \"Cruiser\",\n            \"status\": \"\",\n            \"size\": 3,\n            \"direction\": 0,\n            \"position\": [{\n                \"y\": 2,\n                \"x\": 0\n            }],\n            \"hit\": [0, 0, 0]\n        }, {\n            \"name\": \"Destroyer\",\n            \"status\": \"\",\n            \"size\": 3,\n            \"direction\": 0,\n            \"position\": [{\n                \"y\": 3,\n                \"x\": 0\n            }],\n            \"hit\": [0, 0, 0]\n        }, {\n            \"name\": \"Submarine\",\n            \"status\": \"\",\n            \"size\": 2,\n            \"direction\": 0,\n            \"position\": [{\n                \"y\": 4,\n                \"x\": 0\n            }],\n            \"hit\": [0, 0]\n        }]\n    }],\n    \"type\": \"singleGrid\",\n    \"state\": \"join\"\n}*/\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/objects/Player.ts","import {Injectable} from \"@angular/core\";\nimport {Resolve, ActivatedRouteSnapshot, RouterStateSnapshot, Router} from \"@angular/router\";\nimport {GameService} from \"./game.service\";\nimport {Game} from \"../objects/Game\";\n\n\n@Injectable()\nexport class GameResover implements Resolve<Game> {\n    constructor(\n        private router : Router,\n        private gameService : GameService\n    ) {}\n\n\n    public resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) : Promise<Game> {\n        let id = route.params['id'];\n        return this.gameService.fetchGame(id)\n            .then(Game => {\n                if (Game) {\n                    return Game;\n                } else {\n                    this.router.navigate(['/start']);\n                    return null;\n                }\n            });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/service/game.resolver.ts","import {Injectable} from \"@angular/core\";\nimport {Resolve, ActivatedRouteSnapshot, RouterStateSnapshot, Router} from \"@angular/router\";\nimport BasicProfile = gapi.auth2.BasicProfile;\nimport {PlayerService} from \"./player.service\";\n\n\n@Injectable()\nexport class PlayerResover implements Resolve<BasicProfile> {\n    constructor(\n        private router : Router,\n        private playerService : PlayerService\n    ) {}\n\n\n    public resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) : Promise<BasicProfile> {\n        return this.playerService.getUserProfile()\n            .then(BasicProfile => {\n                if (BasicProfile) {\n                    return BasicProfile;\n                } else {\n                    this.router.navigate(['/start']);\n                    return null;\n                }\n            });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/service/player.resolver.ts","import {Component, OnInit, NgZone} from '@angular/core';\nimport {Router} from \"@angular/router\";\nimport {PlayerService} from \"../service/player.service\";\nimport BasicProfile = gapi.auth2.BasicProfile;\nimport 'rxjs/add/operator/take';\nimport {GameService} from \"../service/game.service\";\n\n@Component({\n    selector: 'app-start',\n    templateUrl: './start.component.html',\n    styleUrls: ['./start.component.css']\n})\nexport class StartComponent implements OnInit {\n    public playerProfile : BasicProfile;\n    public gameID : string = \"\";\n    public gameType : string = \"singleGrid\";\n    public isSignedIn : boolean;\n    public checkingLogin : boolean;\n\n    constructor(\n        private router: Router,\n        private zone : NgZone,\n        private playerService : PlayerService,\n        private gameService : GameService\n    ) { }\n\n    ngOnInit() {\n        this.getUser();\n\n        // gapi.load('auth2', () => {\n        //     (<any>gapi.auth2.init({\n        //         client_id: '244043521193-0eqj994haunsb1a056fkna5ajce9juh1.apps.googleusercontent.com'\n        //     })).then((GoogleAuth) => {\n        //         this.zone.run(() => {\n        //             $this.playerProfile = GoogleAuth.currentUser.get().getBasicProfile().getName();\n        //         });\n        //     }, () => {});\n        // });\n\n            // setTimeout(() => {\n            //     // this.playerProfile = name;\n            // }, 2000);\n        // });\n    }\n\n    private getUser() {\n        this.isSignedIn = false;\n        this.checkingLogin = true;\n\n        // TODO: convert to observable\n        this.playerService.isSignedIn().then((isLoggedIn) => {\n            this.isSignedIn = isLoggedIn;\n            this.checkingLogin = false;\n            if (isLoggedIn) {\n                this.playerService.getUserProfile().then((playerProfile) => {\n                    this.zone.run(() => {\n                        this.playerProfile = playerProfile;\n                    });\n                });\n            }\n        });\n    }\n\n    createGame() {\n        this.gameService.createGame(this.playerProfile).then((gameID) => {\n            this.router.navigate(['/play', gameID, 'setup']);\n        });\n    }\n\n    public signIn() {\n        this.playerService.signIn().then((success) => {\n            if (success) {\n                this.getUser();\n            }\n        });\n    }\n\n    public joinGame() {\n        this.gameService.joinGame(this.gameID, this.playerProfile).then((game) => {\n            this.router.navigate(['/play', this.gameID]);\n        }).catch(() => {\n            alert(`error getting game ${this.gameID}`);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/start/start.component.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 398;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 398\n// module chunks = 1","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport {StartComponent} from \"./start/start.component\";\nimport {GameComponent} from \"./game/game.component\";\nimport {PlayerResover} from \"./service/player.resolver\";\nimport {GameResover} from \"./service/game.resolver\";\n\nconst routes: Routes = [\n    {\n        path: 'play/:id/setup',\n        component: GameComponent,\n        resolve: {\n            profile: PlayerResover,\n            game: GameResover\n        }\n    },\n    {\n        path: 'play/:id',\n        component: GameComponent,\n        resolve: {\n            profile: PlayerResover,\n            game: GameResover\n        }\n    },\n    {\n        path: 'start',\n        component: StartComponent\n    },\n    {\n        path: '',\n        redirectTo: '/start',\n        pathMatch: 'full'\n    },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\n  exports: [RouterModule],\n  providers: []\n})\nexport class AppRoutingModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app-routing.module.ts","import { Component } from '@angular/core';\nimport {PlayerService} from \"./service/player.service\";\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n    public isSignedIn : boolean;\n    public checkingLogin : boolean;\n\n    constructor(\n        private playerService : PlayerService\n    ) {}\n\n    ngOnInit() {\n        this.isSignedIn = false;\n        this.checkingLogin = true;\n\n        this.playerService.isSignedIn().then((isSignedIn) => {\n            this.isSignedIn = isSignedIn;\n            this.checkingLogin = false;\n        });\n    }\n\n    public signOut() {\n        this.playerService.signOut();\n\n    }\n\n    public signIn() {\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { StartComponent } from './start/start.component';\nimport { GameComponent } from './game/game.component';\nimport { GameGridComponent } from './game-grid/game-grid.component';\nimport { GameControlsComponent } from './game-controls/game-controls.component';\nimport { GridShipComponent } from './grid-ship/grid-ship.component';\nimport {GameService} from \"./service/game.service\";\nimport {PlayerService} from \"./service/player.service\";\nimport {PlayerResover} from \"./service/player.resolver\";\nimport {AngularFireModule, FirebaseAppConfig, AuthProviders, AuthMethods} from \"angularfire2\";\nimport {GameResover} from \"./service/game.resolver\";\nimport { GridCellComponent } from './grid-cell/grid-cell.component';\nimport {ShotService} from \"./service/shot.service\";\n\nconst firebaseConfig : FirebaseAppConfig = {\n    apiKey: \"AIzaSyBPz8WD91uJ5IX_qQdKASFQdaA2iuonzHo\",\n    authDomain: \"battleship-161001.firebaseapp.com\",\n    databaseURL: \"https://battleship-161001.firebaseio.com\",\n    storageBucket: \"battleship-161001.appspot.com\",\n    messagingSenderId: \"244043521193\"\n};\n\nconst myFirebaseAuthConfig = {\n    provider: AuthProviders.Google,\n    method: AuthMethods.Redirect\n};\n\n@NgModule({\n    declarations: [\n        AppComponent,\n        StartComponent,\n        GameComponent,\n        GameGridComponent,\n        GameControlsComponent,\n        GridShipComponent,\n        GridCellComponent\n    ],\n    imports: [\n        BrowserModule,\n        FormsModule,\n        HttpModule,\n        AppRoutingModule,\n        AngularFireModule.initializeApp(firebaseConfig, myFirebaseAuthConfig, \"battleship\")\n  ],\n  providers: [\n      GameService,\n      GameResover,\n      PlayerService,\n      PlayerResover,\n      ShotService,\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import {Component, OnInit, Input} from '@angular/core';\nimport {Ship} from \"../objects/Ship\";\nimport {GameService} from \"../service/game.service\";\nimport {Game, GameStatus} from \"../objects/Game\";\nimport {Router, ActivatedRoute, UrlSegment} from \"@angular/router\";\nimport {ROUTE_PART_SETUP, ROUTE_PART_PLAY} from \"../objects/consts\";\nimport {PlayerService} from \"../service/player.service\";\nimport BasicProfile = gapi.auth2.BasicProfile;\nimport {Player} from \"../objects/Player\";\nimport {GridCellComponent} from \"../grid-cell/grid-cell.component\";\nimport {ShotService} from \"../service/shot.service\";\nimport {IShot} from \"../objects/interfaces\";\nimport {GameGridComponent} from \"../game-grid/game-grid.component\";\n\n@Component({\n    selector: 'app-game-controls',\n    templateUrl: './game-controls.component.html',\n    styleUrls: ['./game-controls.component.css'],\n    host: {\n        // Doing this because during setup the ships setup events that we need to prevent triggering\n        \"(mousedown)\" : \"$event.stopPropagation()\",\n        \"(touchstart)\" : \"$event.stopPropagation()\",\n        \"(touchmove)\" : \"$event.stopPropagation()\"\n    }\n})\nexport class GameControlsComponent implements OnInit {\n    @Input() public selectedShip : Ship;\n    @Input() public selectedCell : GridCellComponent;\n    private game : Game;\n    private playerId : string;\n    public doingSetup : boolean;\n    public playing : boolean;\n    public waiting : boolean = false;\n    public validPositions : boolean = true;\n    public player : Player;\n    public shotsRemaining : number = 0;\n    private listeningForShots : boolean = false;\n    public waitingPlayer : Player;\n    private shots : IShot[] = [];\n    public playerWinner : string;\n\n    constructor(\n        private route : ActivatedRoute,\n        private router : Router,\n        private playerService : PlayerService,\n        private gameService : GameService,\n        private shotService : ShotService\n    ) {}\n\n    public ngOnInit() {\n        this.game = this.gameService.getGame();\n        this.gameService.getGameObservable().subscribe(this.handleGameUpdate.bind(this));\n\n        this.route.data\n            .subscribe(({ profile } : { profile : BasicProfile }) => {\n                this.playerId = profile.getId();\n                this.player = this.game.getPlayer(this.playerId);\n                this.handleGameUpdate(this.game);\n            });\n\n        this.route.url\n            .subscribe((parts : UrlSegment[]) => {\n                this.doingSetup = parts[parts.length - 1].path == ROUTE_PART_SETUP;\n                this.playing = !this.doingSetup && parts[0].path == ROUTE_PART_PLAY;\n            });\n    }\n\n    public ngDoCheck() {\n        if (this.doingSetup) {\n            this.validPositions = this.game.getPlayer(this.playerId).validShipPositions();\n        }\n    }\n\n    public rotateShip() : void {\n        this.selectedShip.rotate();\n    }\n\n    public startGame() : void {\n        this.gameService.startGame();\n        this.router.navigate(['../'], { relativeTo: this.route });\n    }\n\n    public lockShips() : void {\n        this.player.lockShips();\n        this.gameService.savePlayersGame(this.playerId);\n    }\n\n    private handleGameUpdate(game) : void {\n        if (!game) {\n            return;\n        }\n        this.game = game;\n        if (!this.player) {\n            return;\n        }\n\n        if (game.status == GameStatus.SETUP && this.player.locked) {\n            this.waiting = game.players.some((player) => {\n                return !player.locked;\n            });\n        } else if (game.status == GameStatus.PLAYING) {\n            if (!this.listeningForShots) {\n                this.shotService.playerTurn(this.game.gameID).subscribe(this.handlePlayerUpdate.bind(this));\n                this.listeningForShots = true;\n            }\n        }\n    }\n\n    private handlePlayerUpdate(playerID : string) : void {\n        if (!playerID) {\n            // game is starting. Player 1 goes first.\n            playerID = this.game.players[0].id;\n        }\n\n        let playerIndex : number;\n        this.game.players.some((player, index) => {\n            if (player.id == playerID) {\n                playerIndex = index;\n                return true;\n            }\n        });\n\n        this.waitingPlayer = undefined;\n\n        for (let i = 1; i < this.game.players.length; i++) {\n            let newPlayerIndex = (i + playerIndex) % this.game.players.length;\n\n            if (this.game.players[newPlayerIndex].shipsRemaining() > 0) {\n                if (this.game.players[newPlayerIndex] == this.player) {\n                    this.shotsRemaining = this.player.shipsRemaining();\n                } else {\n                    this.waitingPlayer = this.game.players[newPlayerIndex];\n                }\n                break;\n            }\n        }\n\n        if (!this.waitingPlayer && !this.shotsRemaining) {\n            // then last player to shoot wins\n            this.playerWinner = this.game.players[playerIndex].name;\n            this.playing = false;\n        }\n    }\n\n    public fire() : void {\n        this.shots.push({\n            x: this.selectedCell.x,\n            y: this.selectedCell.y,\n            playerID : this.playerId\n        });\n        this.shotsRemaining--;\n        this.selectedCell.shoot();\n\n        if (this.shotsRemaining == 0) {\n            this.shotService.fire(this.shots);\n            this.shots = [];\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/game-controls/game-controls.component.ts","import {Component, OnInit, Input, QueryList, ViewChildren, ChangeDetectorRef} from '@angular/core';\nimport {Player} from \"../objects/Player\";\nimport {GridShipComponent} from \"../grid-ship/grid-ship.component\";\nimport {Ship} from \"../objects/Ship\";\nimport {GridCellComponent} from \"../grid-cell/grid-cell.component\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport BasicProfile = gapi.auth2.BasicProfile;\nimport {Game} from \"../objects/Game\";\nimport {GameService} from \"../service/game.service\";\nimport {ShotService} from \"../service/shot.service\";\nimport {IShot, ICord} from \"../objects/interfaces\";\n\n@Component({\n  selector: 'app-game-grid',\n  templateUrl: './game-grid.component.html',\n  styleUrls: ['./game-grid.component.css']\n})\nexport class GameGridComponent implements OnInit {\n    public gridSize : number = 12;\n    public selectedCell : GridCellComponent;\n    private game : Game;\n    @Input() public player : Player;\n\n    @ViewChildren(GridShipComponent)\n    private ships: QueryList<GridShipComponent>;\n\n    @ViewChildren(GridCellComponent)\n    private cells: QueryList<GridCellComponent>;\n\n    constructor(\n        private gameService : GameService,\n        private shotService : ShotService,\n    ) {}\n\n    ngOnInit() {\n        this.gameService.getGameObservable().subscribe((game) => {\n            if (!this.game) { // so we only bind the first time we get a game.\n                this.shotService.getShots(game.gameID).subscribe(this.handleShotUpdate.bind(this));\n            }\n            this.game = game;\n        });\n\n        // this.route.data\n        //     .subscribe(({ profile, game } : { profile : BasicProfile, game : Game }) => {\n        //         this.player = game.getPlayer(profile.getId());\n        //         this.game = game;\n        //     });\n    }\n\n    public gridArray() {\n        return new Array(this.gridSize);\n    }\n\n    public cellSelected(selected : GridCellComponent) {\n        this.selectedCell = selected;\n        this.cells.forEach((cell) => cell.setSelection(selected));\n    }\n\n    private handleShotUpdate(shots : IShot[]) {\n        shots.forEach((shot) => {\n            this.getCell(shot).hitCell(\n                this.gameService.hitShips(shot)\n            );\n        })\n    }\n\n    private getCell(cord : ICord) : GridCellComponent {\n        return this.cells.toArray()[cord.y * this.gridSize + cord.x];\n    }\n\n    get selectedShip() : Ship {\n        if (!this.ships) {\n            return;\n        }\n\n        return (this.ships.find((shipComponent) => {\n            return shipComponent.isSelected;\n        }) || {})['ship'];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/game-grid/game-grid.component.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 587\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".panel.player:nth-child(6n+1) {\\n    border-color: #428BCA;\\n}\\n.panel.player:nth-child(6n+1) > .panel-heading {\\n    color: white;\\n    background-color: #428BCA;\\n    border-color: #428BCA;\\n}\\n.panel.player:nth-child(6n+2) {\\n    border-color: #EB9800;\\n}\\n.panel.player:nth-child(6n+2) > .panel-heading {\\n    color: white;\\n    background-color: #EB9800;\\n    border-color: #EB9800;\\n}\\n.panel.player:nth-child(6n+3) {\\n    border-color: #bd051a;\\n}\\n.panel.player:nth-child(6n+3) > .panel-heading {\\n    color: white;\\n    background-color: #bd051a;\\n    border-color: #bd051a;\\n}\\n.panel.player:nth-child(6n+4) {\\n    border-color: #5cb85c;\\n}\\n.panel.player:nth-child(6n+4) > .panel-heading {\\n    color: white;\\n    background-color: #5cb85c;\\n    border-color: #5cb85c;\\n}\\n.panel.player:nth-child(6n+5) {\\n    border-color: #8A00B8;\\n}\\n.panel.player:nth-child(6n+5) > .panel-heading {\\n    color: white;\\n    background-color: #8A00B8;\\n    border-color: #8A00B8;\\n}\\n.panel.player:nth-child(6n+6) {\\n    border-color: #000099;\\n}\\n.panel.player:nth-child(6n+6) > .panel-heading {\\n    color: white;\\n    background-color: #000099;\\n    border-color: #000099;\\n}\\n.panel-heading {\\n    font-weight: bold;\\n    letter-spacing: 1px;\\n    padding: 6px 15px;\\n}\\n\\n.list-group-item {\\n    padding: 3px 15px;\\n}\\n.player .circle {\\n    border: 1px solid #AAA;\\n    border-radius: 6px;\\n    float: right;\\n    height: 12px;\\n    margin: 5px 1px 0;\\n    overflow: hidden;\\n    width: 12px;\\n}\\n.player .circle .hit {\\n    background-color: #555;\\n    display: block;\\n    height: 100%;\\n    width: 100%;\\n}\\n\\n.top-info {\\n    padding-top: 7px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/game-controls/game-controls.component.css\n// module id = 588\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"/* TODO: Use better CSS */\\n:host {\\n    border: 1px solid #ccc;\\n    margin-bottom: 40px;\\n    position: relative;\\n    display: inline-block;\\n    -webkit-touch-callout: none;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none;\\n}\\n\\n.cell_row {\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/game-grid/game-grid.component.css\n// module id = 589\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/game/game.component.css\n// module id = 590\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".cell {\\n    border: 1px solid rgba(190,190,190,0.5);\\n    display: inline-block;\\n    float: left;\\n    height: 40px;\\n    position: relative;\\n    width: 40px;\\n    z-index: 20;\\n}\\n\\n.cell:hover {\\n    border-color: #999;\\n}\\n.cell.target {\\n    border: 5px solid #d2322d;\\n}\\n\\n.hit-ship {\\n    background-color: #999;\\n    border-radius: 6px;\\n    display: block;\\n    float: left;\\n    height: 10px;\\n    margin: 2px 1px;\\n    width: 10px;\\n}\\n.hit-ship.blue {\\n    background-color: #428BCA;\\n}\\n.hit-ship.orange {\\n    background-color: #EB9800;\\n}\\n.hit-ship.red {\\n    background-color: #bd051a;\\n}\\n.hit-ship.green {\\n    background-color: #5cb85c;\\n}\\n.hit-ship.purple {\\n    background-color: #8A00B8;\\n}\\n.hit-ship.darkblue {\\n    background-color: #000099;\\n}\\n\\n.miss, .shot {\\n    background-color: #999;\\n    border-radius: 6px;\\n    left: 50%;\\n    height: 12px;\\n    margin: -6px 0 0 -6px;\\n    position: absolute;\\n    top: 50%;\\n    width: 12px;\\n}\\n.shot {\\n    background-color: #000;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/grid-cell/grid-cell.component.css\n// module id = 591\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".ship {\\n    background-color: #008000;\\n    border: 1px solid #444;\\n    border-radius: 20px;\\n    left: 0px;\\n    height: 40px;\\n    position: absolute;\\n    top: 0px;\\n    -webkit-transform-origin: 21px 21px;\\n    transform-origin: 21px 21px;\\n}\\n.ship:after {\\n    display: table;\\n    content: \\\" \\\";\\n}\\n:host-context(.position) .ship.selected {\\n    border-width: 3px;\\n    z-index: 31;\\n}\\n:host-context(.position) .ship {\\n    z-index: 30;\\n    cursor: move;\\n}\\n\\n.Carrier {\\n    width: calc(5 * 40px);\\n}\\n.Battleship {\\n    width: calc(4 * 40px);\\n}\\n.Cruiser {\\n    width: calc(3 * 40px);\\n}\\n.Destroyer {\\n    width: calc(3 * 40px);\\n}\\n.Submarine {\\n    width: calc(2 * 40px);\\n}\\n\\n.hit-loc {\\n    display: inline-block;\\n    height: 40px;\\n    width: 41px;\\n}\\n.hit {\\n    background-color: #444;\\n    border-radius: 20px;\\n}\\n.setup .hit-loc {\\n    display: none;\\n}\\n\\n\\n\\n.x-0  { left: 0 }\\n.x-1  { left: calc(1 * 40px) }\\n.x-2  { left: calc(2 * 40px) }\\n.x-3  { left: calc(3 * 40px) }\\n.x-4  { left: calc(4 * 40px) }\\n.x-5  { left: calc(5 * 40px) }\\n.x-6  { left: calc(6 * 40px) }\\n.x-7  { left: calc(7 * 40px) }\\n.x-8  { left: calc(8 * 40px) }\\n.x-9  { left: calc(9 * 40px) }\\n.x-10 { left: calc(10 * 40px) }\\n.x-11 { left: calc(11 * 40px) }\\n\\n.y-0  { top: 0 }\\n.y-1  { top: calc(1 * 40px) }\\n.y-2  { top: calc(2 * 40px) }\\n.y-3  { top: calc(3 * 40px) }\\n.y-4  { top: calc(4 * 40px) }\\n.y-5  { top: calc(5 * 40px) }\\n.y-6  { top: calc(6 * 40px) }\\n.y-7  { top: calc(7 * 40px) }\\n.y-8  { top: calc(8 * 40px) }\\n.y-9  { top: calc(9 * 40px) }\\n.y-10 { top: calc(10 * 40px) }\\n.y-11 { top: calc(11 * 40px) }\\n\\n.dir-45 {\\n    -webkit-transform:  translate(4px, 5px) rotate(45deg) scale(1.33,1);\\n    transform:          translate(4px, 5px) rotate(45deg) scale(1.33,1);\\n}\\n.dir-90 {\\n    -webkit-transform:  translate(-2px, 0px) rotate(90deg);\\n    transform:          translate(-2px, 0px) rotate(90deg);\\n}\\n.dir-135 {\\n    -webkit-transform:  translate(-7px, 4px) rotate(135deg) scale(1.33,1);\\n    transform:          translate(-7px, 4px) rotate(135deg) scale(1.33,1);\\n}\\n.Battleship.dir-45, .Battleship.dir-135 {\\n    width: calc(4 * 40px - 1px);\\n}\\n.Cruiser.dir-45, .Cruiser.dir-135 {\\n    width: calc(3 * 40px - 4px);\\n}\\n.Destroyer.dir-45, .Destroyer.dir-135 {\\n    width: calc(3 * 40px - 4px);\\n}\\n.Submarine.dir-45, .Submarine.dir-135 {\\n    width: calc(2 * 40px - 6px);\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/grid-ship/grid-ship.component.css\n// module id = 592\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/start/start.component.css\n// module id = 593\n// module chunks = 1","module.exports = \"<div class=\\\"navbar navbar-fixed-top navbar-inverse\\\" role=\\\"navigation\\\">\\n    <div class=\\\"container\\\">\\n        <div class=\\\"navbar-header\\\">\\n            <a class=\\\"navbar-brand\\\" href=\\\"#\\\">Battleship</a>\\n        </div>\\n        <div class=\\\"navbar-collapse collapse\\\" aria-expanded=\\\"false\\\">\\n            <div class=\\\"navbar-form navbar-right\\\">\\n                <button class=\\\"btn btn-default btn-sm\\\" *ngIf=\\\"!isSignedIn\\\" (click)=\\\"signIn()\\\">Sign In</button>\\n                <button class=\\\"btn btn-default btn-sm\\\" *ngIf=\\\"isSignedIn\\\" (click)=\\\"signOut()\\\">Sign Out</button>\\n            </div>\\n        </div>\\n    </div><!-- /.container -->\\n</div><!-- /.navbar -->\\n\\n<div class=\\\"container\\\">\\n    <router-outlet></router-outlet>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 600\n// module chunks = 1","module.exports = \"<div class=\\\"well sidebar-nav\\\">\\n    <button class=\\\"btn btn-primary\\\" [disabled]=\\\"!selectedShip\\\" *ngIf=\\\"doingSetup\\\" (click)=\\\"rotateShip()\\\">\\n        <span class=\\\"glyphicon glyphicon-repeat\\\"></span>\\n    </button>\\n    <button class=\\\"btn btn-success pull-right\\\"\\n            *ngIf=\\\"doingSetup && !player.locked\\\"\\n            [disabled]=\\\"!validPositions\\\"\\n            (click)=\\\"lockShips()\\\">Lock Ships</button>\\n\\n    <button class=\\\"btn btn-success pull-right\\\"\\n            *ngIf=\\\"doingSetup && player.locked && !waiting\\\"\\n            [disabled]=\\\"!validPositions\\\"\\n            (click)=\\\"startGame()\\\">Start Game</button>\\n\\n    <button class=\\\"btn btn-default pull-right\\\"\\n            *ngIf=\\\"waiting\\\"\\n            disabled=\\\"disabled\\\">Waiting for other players</button>\\n\\n    <button class=\\\"btn btn-danger\\\"\\n            [disabled]=\\\"!selectedCell || !shotsRemaining\\\"\\n            *ngIf=\\\"playing\\\"\\n            (click)=\\\"fire()\\\">Fire</button>\\n\\n    <span class=\\\"pull-right top-info\\\" *ngIf=\\\"playerWinner\\\">{{playerWinner}} WINS!!!</span>\\n    <span class=\\\"pull-right top-info\\\" *ngIf=\\\"playing && waitingPlayer\\\">Waiting for {{waitingPlayer.name}}</span>\\n    <span class=\\\"pull-right top-info\\\" *ngIf=\\\"playing && !waitingPlayer\\\">Shots Remaining: {{shotsRemaining}}</span>\\n\\n    <hr/>\\n    <div>\\n        <div class=\\\"panel player\\\" *ngFor=\\\"let player of game.players\\\">\\n            <div class=\\\"panel-heading\\\">\\n                {{ player.name }}\\n            </div>\\n            <ul class=\\\"list-group\\\">\\n                <li class=\\\"list-group-item\\\" *ngFor=\\\"let ship of player.ships\\\">{{ ship.type }}\\n<!--                    <span class=\\\"circle\\\"-->\\n<!--                          ng-repeat=\\\"hit in ship.getHits(aShots).sort().reverse() track by $index\\\">-->\\n                    <span class=\\\"circle\\\"\\n                          *ngFor=\\\"let hit of ship.hits.slice(0).sort()\\\">\\n                        <span class=\\\"hit\\\" *ngIf=\\\"hit\\\"></span>\\n                    </span>\\n                </li>\\n            </ul>\\n        </div>\\n    </div>\\n\\n    <div *ngIf=\\\"doingSetup\\\">\\n        <hr/>\\n        <h4>Invite more players using game ID: <strong>{{game.gameID}}</strong></h4>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/game-controls/game-controls.component.html\n// module id = 601\n// module chunks = 1","module.exports = \"<div *ngFor=\\\"let ship of player.ships\\\">\\n    <grid-ship [ship]=\\\"ship\\\"></grid-ship>\\n</div>\\n\\n<div *ngFor=\\\"let yPos of gridArray(); let y = index;\\\" class=\\\"cell_row\\\">\\n    <grid-cell *ngFor=\\\"let xPos of gridArray(); let x = index;\\\" (selected)=\\\"cellSelected($event)\\\" [x]=\\\"x\\\" [y]=\\\"y\\\"></grid-cell>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/game-grid/game-grid.component.html\n// module id = 602\n// module chunks = 1","module.exports = \"<div class=\\\"row\\\" [class.position]=\\\"positioning && !player.locked\\\">\\n    <div class=\\\"col-md-8\\\">\\n        <div style=\\\"font-size:0;\\\">\\n            <app-game-grid #grid [player]=\\\"player\\\"></app-game-grid>\\n        </div>\\n        <ul>\\n            <li>You can shoot yourself, so shoot carefully.</li>\\n            <li>You get 1 shot per alive ship.</li>\\n        </ul>\\n    </div>\\n    <div class=\\\"col-md-4 sidebar-offcanvas\\\">\\n        <app-game-controls [selectedShip]=\\\"grid.selectedShip\\\" [selectedCell]=\\\"grid.selectedCell\\\"></app-game-controls>\\n    </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/game/game.component.html\n// module id = 603\n// module chunks = 1","module.exports = \"<div class=\\\"cell\\\" [class.target]=\\\"isSelected\\\" (click)=\\\"select()\\\">\\n    <span class=\\\"hit-ship\\\" *ngFor=\\\"let color of hits\\\" [ngClass]=\\\"color\\\"></span>\\n    <span class=\\\"shot\\\" *ngIf=\\\"shotPending\\\"></span>\\n    <span class=\\\"miss\\\" *ngIf=\\\"miss\\\"></span>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/grid-cell/grid-cell.component.html\n// module id = 604\n// module chunks = 1","module.exports = \"<div class=\\\"ship\\\" [ngClass]=\\\"shipClasses\\\" [class.setup]=\\\"doingSetup\\\">\\n    <div class=\\\"hit-loc\\\" *ngFor=\\\"let hit of ship.hits\\\" [class.hit]=\\\"hit\\\"></div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/grid-ship/grid-ship.component.html\n// module id = 605\n// module chunks = 1","module.exports = \"<div class=\\\"row\\\">\\n    <form class=\\\"form-horizontal\\\" role=\\\"form\\\">\\n        <div class=\\\"col-md-6\\\">\\n            <div class=\\\"panel panel-success\\\">\\n            <div class=\\\"panel-heading\\\">\\n                <h4>Create New Game</h4>\\n            </div>\\n            <div class=\\\"panel-body\\\">\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-lg-3 control-label\\\">Player: </label>\\n                    <div class=\\\"col-lg-9\\\">\\n                        <div *ngIf=\\\"isSignedIn\\\" style=\\\"padding-top:7px;\\\">{{ playerProfile.getName() }}</div>\\n                        <button class=\\\"btn btn-default\\\" *ngIf=\\\"!isSignedIn\\\" (click)=\\\"signIn()\\\">Sign In</button>\\n                    </div>\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-lg-3 control-label\\\"><strong>Game Type</strong></div>\\n                    <div class=\\\"col-lg-9\\\">\\n                        <div class=\\\"radio\\\">\\n                            <label>\\n                                <input type=\\\"radio\\\" name=\\\"gameType\\\" [(ngModel)]=\\\"gameType\\\" value=\\\"singleGrid\\\" />\\n                                All players play on the same grid.\\n                            </label>\\n                        </div>\\n                        <div class=\\\"radio\\\">\\n                            <label>\\n                                <input type=\\\"radio\\\" disabled name=\\\"gameType\\\" [(ngModel)]=\\\"gameType\\\" value=\\\"multiGrid\\\" />\\n                                Every player gets their own grid. (coming soon)\\n                            </label>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-lg-offset-3 col-lg-9\\\">\\n                        <button class=\\\"btn btn-success\\\" (click)=\\\"createGame()\\\" [disabled]=\\\"!isSignedIn\\\">Create Game</button>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        </div>\\n        <div class=\\\"col-md-6\\\">\\n            <div class=\\\"panel panel-info\\\">\\n            <div class=\\\"panel-heading\\\">\\n                <h4>Join Existing Game</h4>\\n            </div>\\n            <div class=\\\"panel-body\\\">\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-lg-3 control-label\\\">Player: </label>\\n                    <div class=\\\"col-lg-9\\\">\\n                        <div *ngIf=\\\"isSignedIn\\\" style=\\\"padding-top:7px;\\\">{{ playerProfile.getName() }}</div>\\n                        <button class=\\\"btn btn-default\\\" *ngIf=\\\"!isSignedIn\\\" (click)=\\\"signIn()\\\">Sign In</button>\\n                    </div>\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-lg-3 control-label\\\">Game ID: </label>\\n                    <div class=\\\"col-lg-9\\\">\\n                        <input type=\\\"text\\\" [(ngModel)]=\\\"gameID\\\" name=\\\"gameID\\\"/>\\n                    </div>\\n                </div>\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-lg-offset-3 col-lg-9\\\">\\n                        <button class=\\\"btn btn-info\\\" (click)=\\\"joinGame()\\\" [disabled]=\\\"!gameID || !isSignedIn\\\">Join Game</button>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        </div>\\n    </form>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/start/start.component.html\n// module id = 606\n// module chunks = 1","import {Injectable} from \"@angular/core\";\nimport {Game, GameStatus} from \"../objects/Game\";\nimport BasicProfile = gapi.auth2.BasicProfile;\nimport {AngularFire} from \"angularfire2\";\nimport {Player} from \"../objects/Player\";\nimport {Observable} from \"rxjs\";\nimport {PlayerService} from \"./player.service\";\nimport {ICord} from \"../objects/interfaces\";\nimport {MAX_PLAYERS} from \"../objects/consts\";\n\n// <script src=\"https://www.gstatic.com/firebasejs/3.7.1/firebase.js\"></script>\n//     <script>\n// // Initialize Firebase\n// var config = {\n//     apiKey: \"AIzaSyBPz8WD91uJ5IX_qQdKASFQdaA2iuonzHo\",\n//     authDomain: \"battleship-161001.firebaseapp.com\",\n//     databaseURL: \"https://battleship-161001.firebaseio.com\",\n//     storageBucket: \"battleship-161001.appspot.com\",\n//     messagingSenderId: \"244043521193\"\n// };\n// firebase.initializeApp(config);\n// </script>\n\n@Injectable()\nexport class GameService {\n    // private gameEvent : EventEmitter<any> = new EventEmitter();\n    private game : Game;\n    private profile : BasicProfile;\n\n    constructor(\n        private firebase : AngularFire,\n        private playerService : PlayerService\n    ) {}\n\n    public createGame(player : BasicProfile) : Promise<number> {\n        return new Promise((resolve, reject) => {\n            // using 4 digits so we don't have huge URLs\n            // 36^4 == 1,679,616, so that is a lot of games, not that we want to get even close to\n            // that or finding unique ID might get really expensive\n            this.getUniqueID(4).then((gameID) => {\n                this.game = new Game(gameID, player.getId());\n                this.game.createPlayer(player);\n\n                this.firebase.database.object(`games/${gameID}`).set(this.game);\n\n                // TODO: after firebase success\n                resolve(gameID);\n            });\n        });\n    }\n\n    public getGame() : Game {\n        return this.game;\n    }\n\n    public getGameObservable() : Observable<Game> {\n        return new Observable((observer) => {\n            this.firebase.database.object(`games/${this.game.gameID}`).subscribe((data) => {\n                // TODO: merge with fetchGame so we don't have to worry about a race condition.\n                setTimeout(() => {\n                    observer.next(this.game)\n                }, 10);\n            });\n            // const mapObserver = {\n            //     next: (x) => observer.next(project(x)),\n            //     error: (err) => observer.error(err),\n            //     complete: () => observer.complete()\n            // };\n            // return this.subscribe(mapObserver);\n        });\n    }\n\n    public fetchGame(gameID : string) : Promise<Game> {\n        return new Promise((resolve, reject) => {\n            this.playerService.getUserProfile().then((playerProfile) => {\n                this.profile = playerProfile;\n                if (this.game) {\n                    resolve(this.game);\n                } else {\n                    this.firebase.database.object(`games/${gameID}`).subscribe((data) => {\n                        if (data.$exists()) {\n                            if (this.game && this.game.gameID == data.gameID) {\n                                // updated game\n                                this.game.status = data.status;\n                                data.players.forEach((playerData) => {\n                                    let playerObj: Player = this.game.getPlayer(playerData.id);\n                                    if (!playerObj) {\n                                        this.game.addPlayerFromData(playerData);\n                                    // we don't want to update our own player from external sources\n                                    } else if (playerProfile.getId() != playerData.id) {\n                                        Object.assign(playerObj, this.game.makePlayerFromData(playerData));\n                                    }\n                                });\n                                if (this.game.players.length != data.players.length) {\n                                }\n                            } else {\n                                // new game\n                                this.game = new Game(gameID, data.ownerID);\n                                this.game.initFromData(data);\n                            }\n                            resolve(this.game);\n                        } else {\n                            reject();\n                        }\n                    });\n                }\n            });\n        });\n    }\n\n    private getUniqueID(size : number) : Promise<string> {\n        // TODO: implement a way to lock so 2 simultaneous games can't start at the same time\n        return new Promise((resolve, reject) => {\n            // better answers: http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n            let id: string = Math.random().toString(36).substring(2, size + 2);\n            this.firebase.database.object(`games/${id}`).take(1).subscribe((data) => {\n                if (data.$exists()) {\n                    // oops. Lets try again.\n                    // TODO: implement max-retries\n                    resolve(this.getUniqueID(size));\n                } else {\n                    // yay. found one\n                    resolve(id);\n                }\n            });\n        });\n    }\n\n    public savePlayersGame(playerId : string) {\n        let player : Player = this.game.getPlayer(playerId);\n        let playerIndex : number = this.game.players.indexOf(player);\n        this.firebase.database.object(`games/${this.game.gameID}/players/${playerIndex}`).update(player)\n    }\n\n    public startGame() {\n        this.game.status = GameStatus.PLAYING;\n        this.firebase.database.object(`games/${this.game.gameID}`).update({\n            status : this.game.status\n        })\n    }\n\n    public joinGame(gameID : string, profile : BasicProfile) : Promise<Game> {\n        return this.fetchGame(gameID).then((game) => {\n            if (!game.getPlayer(profile.getId()) && game.status == GameStatus.SETUP && game.players.length < MAX_PLAYERS) {\n                game.createPlayer(profile);\n                this.firebase.database.object(`games/${this.game.gameID}/players/${game.players.length - 1}`).set(game.getPlayer(profile.getId()));\n            }\n            return game;\n        });\n    }\n\n    public hitShips(cord : ICord) : any[] {\n        let hits : any[] = [];\n\n        this.game.players.forEach((player, playerIndex) => {\n            hits = hits.concat(\n                player.hitShips(cord)\n                    .filter((ship) => {\n                        return ship.playerId != this.profile.getId()\n                    })\n                    .map((ship) => {\n                        // just so we know which color to mark the hit\n                        ship.playerIndex = playerIndex;\n                        return ship;\n                    })\n            );\n        });\n\n        return hits;\n    }\n\n// {\n    // \"players\": [{\n    //     \"name\": \"asdf\",\n    //     \"ships\": [{\n    //         \"name\": \"Carrier\",\n    //         \"status\": \"\",\n    //         \"size\": 5,\n    //         \"direction\": 0,\n    //         \"position\": [{\n    //             \"y\": 0,\n    //             \"x\": 0\n    //         }],\n    //         \"hit\": [0, 0, 0, 0, 0]\n    //     }, {\n    //         \"name\": \"Battleship\",\n    //         \"status\": \"\",\n    //         \"size\": 4,\n    //         \"direction\": 0,\n    //         \"position\": [{\n    //             \"y\": 1,\n    //             \"x\": 0\n    //         }],\n    //         \"hit\": [0, 0, 0, 0]\n    //     }, {\n    //         \"name\": \"Cruiser\",\n    //         \"status\": \"\",\n    //         \"size\": 3,\n    //         \"direction\": 0,\n    //         \"position\": [{\n    //             \"y\": 2,\n    //             \"x\": 0\n    //         }],\n    //         \"hit\": [0, 0, 0]\n    //     }, {\n    //         \"name\": \"Destroyer\",\n    //         \"status\": \"\",\n    //         \"size\": 3,\n    //         \"direction\": 0,\n    //         \"position\": [{\n    //             \"y\": 3,\n    //             \"x\": 0\n    //         }],\n    //         \"hit\": [0, 0, 0]\n    //     }, {\n    //         \"name\": \"Submarine\",\n    //         \"status\": \"\",\n    //         \"size\": 2,\n    //         \"direction\": 0,\n    //         \"position\": [{\n    //             \"y\": 4,\n    //             \"x\": 0\n    //         }],\n    //         \"hit\": [0, 0]\n    //     }]\n    // }],\n    // \"type\": \"singleGrid\",\n    // \"state\": \"join\"\n// }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/service/game.service.ts","///<reference path=\"../../../node_modules/@types/gapi.auth2/index.d.ts\"/>\nimport { Injectable } from '@angular/core';\nimport gapi_auth2 = gapi;\nimport GoogleUser = gapi.auth2.GoogleUser;\nimport GoogleAuth = gapi.auth2.GoogleAuth;\nimport BasicProfile = gapi.auth2.BasicProfile;\n\n@Injectable()\nexport class PlayerService {\n    // public playerProfile : BasicProfile;\n    private loadedPromise : Promise<boolean>;\n\n    constructor() {\n        this.loadedPromise = new Promise((resolve, reject) => {\n            gapi.load('auth2', () => {\n                gapi.auth2.init({\n                    client_id: '244043521193-0eqj994haunsb1a056fkna5ajce9juh1.apps.googleusercontent.com'\n                }).then(() => resolve(true), () => reject(\"gapi.auth2.init error\"));\n            });\n        });\n\n        // this.loadedPromise.then((GoogleAuth) => {\n        //     GoogleAuth.isSignedIn.get();\n        // });\n\n        this.loadedPromise.catch((error) => {\n            console.error(error);\n        });\n    }\n\n    public isSignedIn() : Promise<boolean> {\n        return new Promise((resolve, reject) => {\n            this.loadedPromise.then(() => {\n                resolve(gapi.auth2.getAuthInstance().isSignedIn.get())\n            });\n        });\n    }\n\n    // TODO: make this observable\n    public signIn() : Promise<boolean> {\n        return new Promise((resolve, reject) => {\n            this.loadedPromise.then(() => {\n                gapi.auth2.getAuthInstance().signIn().then(() => {\n                    resolve(true);\n                }, () => {\n                    resolve(false);\n                });\n            });\n        });\n    }\n\n    public signOut() : void {\n        this.loadedPromise.then(() => {\n            gapi.auth2.getAuthInstance().signOut();\n        });\n    }\n\n    public getUserProfile() : Promise<BasicProfile> {\n        return new Promise((resolve, reject) => {\n            this.loadedPromise.then(() => {\n                // this.playerProfile = GoogleAuth.currentUser.get().getBasicProfile();\n                resolve(gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile());\n            }).catch(reject);\n        });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/service/player.service.ts"],"sourceRoot":""}